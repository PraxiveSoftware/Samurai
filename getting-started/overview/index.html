<!doctype html><html><head><meta charset=UTF-8><link href=https://praxivesoftware.github.io/Samurai/main.css rel=stylesheet><meta content="width=device-width,initial-scale=1.0,maximum-scale=1" name=viewport><title> Setting up your project | Samurai </title><body><script>fetch(`https://api.github.com/repos/PraxiveSoftware/samurai/releases/latest`).then(a=>a.json()).then(a=>{let b=a.name;let c=a.html_url;release.innerHTML=`<a href='${c}'>${b}</a>`})</script><main><nav><a href=https://praxivesoftware.github.io/Samurai> <img alt src=https://raw.githubusercontent.com/microsoft/fluentui-emoji/main/assets/Dragon/3D/dragon_3d.png> </a><div id=release></div><a class=ms-Icon--GlobalNavButton href=javascript:void(0); id=mobile onclick=burger()></a><div id=trees><input checked class=tree-toggle id=getting-started type=checkbox><label class=tree-toggle-label for=getting-started>Getting Started</label><ul class=subtree><li class=active><a href=https://praxivesoftware.github.io/Samurai/getting-started/overview/>Setting up your project</a></li><ul id=toc><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/overview/#getting-started-with-samurai>Getting started with samurai</a> <ul><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/overview/#what-is-samurai>What is samurai</a><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/overview/#getting-help>Getting help</a><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/overview/#system-requirements>System requirements</a><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/overview/#getting-started>Getting started</a></ul><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/overview/#common-errors>Common errors</a> <ul><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/overview/#anything-to-do-with-wasm-ld>Anything to do with wasm-ld</a></ul></ul><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/filestructure/>Understanding the file structure</a><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/userchrome/>Customizing Your Browser's UI</a></ul><input class=tree-toggle id=guides type=checkbox><label class=tree-toggle-label for=guides>Guides</label><ul class=subtree><li><a href=https://praxivesoftware.github.io/Samurai/guides/windows/>Preparing Windows</a><li><a href=https://praxivesoftware.github.io/Samurai/guides/removingpocket/>Removing pocket</a><li><a href=https://praxivesoftware.github.io/Samurai/guides/includingaddons/>Including addons</a><li><a href=https://praxivesoftware.github.io/Samurai/guides/branding/>Branding your browser</a><li><a href=https://praxivesoftware.github.io/Samurai/guides/autoupdates/>Automatic updates</a></ul><input class=tree-toggle id=reference type=checkbox><label class=tree-toggle-label for=reference>Reference</label><ul class=subtree><li><a href=https://praxivesoftware.github.io/Samurai/reference/config/>`samurai.json` Reference</a></ul></div></nav><article><div id=on_right><span class=ms-Icon--Search id=search-ico></span></div><div class=search-container><input placeholder="Search as you type..." id=search type=search><div class=search-results><div class=search-results__header></div><ul class=search-results__items></ul></div></div><div id=wrap><h2 id=getting-started-with-samurai>Getting started with samurai</h2><h3 id=what-is-samurai>What is samurai</h3><p>Samurai is a build tool and documentation for creating firefox-based browsers. Its goal is to simplify the process of creating web browsers to encourage competition and development within the space.<h3 id=getting-help>Getting help</h3><p>If you are having problems with following these instructions, or with samurai in general, please contact us. You can <a href=https://github.com/PraxiveSoftware/samurai/discussions/new>create a discussion on github</a>, ping @jonasfranke (BinaryBlazer - Jonas F. Franke) on the <a href=https://discord.gg/praxive>Praxive Community Discord</a>.<h3 id=system-requirements>System requirements</h3><ul><li><strong>OS</strong>: Linux, MacOS and Windows (Support for Windows is experimental)<li><strong>Disk space</strong>: 100GB<li><strong>RAM</strong>: 16GB (8GB minimum, not recommended)<li><strong>CPU</strong>: 4 cores<li><strong>Dependencies</strong>: NodeJS, Python3, pip3, git<li><strong>Optional dependencies</strong>: MozillaBuild (Windows only) (download: <a href=https://ftp.mozilla.org/pub/mozilla/libraries/win32/MozillaBuildSetup-Latest.exe>here</a>)</ul><h3 id=getting-started>Getting started</h3><p>The first thing you are going to need to do is to install Samurai. As it is a nodejs program it can be installed through npm or yarn.<pre class=language-sh data-lang=sh style=color:#c0c5ce;background-color:#2b303b><code class=language-sh data-lang=sh><span style=color:#bf616a>npm</span><span> install</span><span style=color:#bf616a> -g</span><span> @praxive/samurai
</span><span style=color:#65737e># or
</span><span style=color:#bf616a>yarn</span><span> global add @praxive/samurai
</span><span>
</span><span style=color:#65737e># Note: Linux and mac users may have to run the above command with sudo
</span></code></pre><p>Now we suggest you to check if you have all the dependencies installed. You can do this by running the following command:<pre class=language-sh data-lang=sh style=color:#c0c5ce;background-color:#2b303b><code class=language-sh data-lang=sh><span style=color:#bf616a>samurai</span><span> check
</span></code></pre><p>Next create a git repo and clone it to your local machine. Then run the following:<pre class=language-sh data-lang=sh style=color:#c0c5ce;background-color:#2b303b><code class=language-sh data-lang=sh><span style=color:#bf616a>samurai</span><span> setup-project
</span></code></pre><p>This will ask you a variety of questions in relation to your project setup. Firstly, the release of the browser you want to bind to.<pre style=color:#c0c5ce;background-color:#2b303b><code><span>? Select a product to fork › - Use arrow-keys. Return to submit.
</span><span>❯   Firefox stable
</span><span>    Firefox extended support (older)
</span><span>    Firefox extended support (newer)
</span><span>    Firefox developer edition (Not recommended)
</span><span>    Firefox beta (Not recommended)
</span></code></pre><p>Then next is the version of the browser you want to use. By default samurai will populate this with the latest version available, which we recommend using. Simply click enter to accept.<pre style=color:#c0c5ce;background-color:#2b303b><code><span>? Enter the version of this product › 128.0
</span></code></pre><p>Next it will ask for the name of your browser. Avoid references to Firefox or other Mozilla brands, as this is likely to lead to trademark and copyright issues down the road.<pre style=color:#c0c5ce;background-color:#2b303b><code><span>? Enter a product name › Samurai Example Browser
</span></code></pre><p>The binary name is the name that your program will be run from. We recommend that you add <code>-browser</code> to the end to <a href=https://github.com/dothq/browser/issues/604>avoid conflicts with common utilities</a>.<pre style=color:#c0c5ce;background-color:#2b303b><code><span>? Enter the name of the binary › samurai-example-browser
</span></code></pre><p>Vendor is the company (or solo developer) who is creating the browser.<pre style=color:#c0c5ce;background-color:#2b303b><code><span>? Enter a vendor › Fushra
</span></code></pre><p>The appid follows reverse dns naming conventions. For example, Fushra owns the domain <code>fushra.com</code>, so our browser is <code>com.fushra.browser.desktop</code>. If you do not have a domain, you can use your username / pseudonym as the appid, e.g. <code>trickypr.watermelon</code>.<pre style=color:#c0c5ce;background-color:#2b303b><code><span>? Enter an appid › dev.samurai.example
</span></code></pre><p>Next you need to chose a starting template for your browser. If you know what you are doing, you can go with <code>None</code> and configure it how you like. Otherwise, we recommend you stick with <code>UserChrome</code>.<pre style=color:#c0c5ce;background-color:#2b303b><code><span>? Select a ui mode template › - Use arrow-keys. Return to submit.
</span><span>    None
</span><span>❯   User Chrome (custom browser css, simplest)
</span></code></pre><p>Now you have created the directory structure for your project, you can build it for the first time. First, ask samurai to download the firefox source.<pre class=language-sh data-lang=sh style=color:#c0c5ce;background-color:#2b303b><code class=language-sh data-lang=sh><span style=color:#bf616a>samurai</span><span> download
</span></code></pre><p>If you are running this for the first time, you will need to install the firefox dependencies. You can do this via boostrapping:<pre class=language-sh data-lang=sh style=color:#c0c5ce;background-color:#2b303b><code class=language-sh data-lang=sh><span style=color:#bf616a>samurai</span><span> bootstrap
</span></code></pre><p>If you encour any errors with not found pip or MozillaBuild (MozillaBuild: Windows Only) while running the bootstrap command, you can try running the following command:<pre class=language-sh data-lang=sh style=color:#c0c5ce;background-color:#2b303b><code class=language-sh data-lang=sh><span style=color:#bf616a>samurai</span><span> download-mb-pip
</span></code></pre><p>After the source code has been downloaded, the changes to firefox described in the source code must be applied.<pre class=language-sh data-lang=sh style=color:#c0c5ce;background-color:#2b303b><code class=language-sh data-lang=sh><span style=color:#bf616a>samurai</span><span> import
</span></code></pre><p>After running the importation, we have to add files and create our first commit.<pre class=language-sh data-lang=sh style=color:#c0c5ce;background-color:#2b303b><code class=language-sh data-lang=sh><span style=color:#bf616a>samurai</span><span> commit
</span></code></pre><p>Finally, you can start building the firefox source code. This takes around an hour and a half on my computer, but the binary output will be cached, making later builds faster<pre class=language-sh data-lang=sh style=color:#c0c5ce;background-color:#2b303b><code class=language-sh data-lang=sh><span style=color:#bf616a>samurai</span><span> build
</span></code></pre><p>Now you can finally start the browser!<pre class=language-sh data-lang=sh style=color:#c0c5ce;background-color:#2b303b><code class=language-sh data-lang=sh><span style=color:#bf616a>samurai</span><span> run
</span></code></pre><h2 id=common-errors>Common errors</h2><p>Here are some common errors that you might run into whilst running <code>samurai build</code> and some potential fixes.<h3 id=anything-to-do-with-wasm-ld>Anything to do with <code>wasm-ld</code></h3><p>On Arch linux, there were two errors that were thrown:<pre style=color:#c0c5ce;background-color:#2b303b><code><span>Executable "wasm-ld" doesn't exist!
</span><span>wasm-ld: error: cannot open /usr/lib/clang/{CLANG_VERSION}/lib/wasi/libclang_rt.builtins-wasm32.a: No such file or directory
</span></code></pre><p>On Linux, I fixed the first error by installing <code>ldd</code>:<pre class=language-sh data-lang=sh style=color:#c0c5ce;background-color:#2b303b><code class=language-sh data-lang=sh><span style=color:#bf616a>apt-get</span><span> install lld-7 </span><span style=color:#65737e># Debian
</span><span style=color:#bf616a>apt-get</span><span> install lld-8 </span><span style=color:#65737e># Ubuntu
</span><span style=color:#bf616a>apk</span><span> add lld </span><span style=color:#65737e># Alpine
</span><span style=color:#bf616a>pacman -S</span><span> lld </span><span style=color:#65737e># Arch
</span><span style=color:#bf616a>dnf</span><span> install lld </span><span style=color:#65737e># Fedora
</span></code></pre><p>The second error was fixed by installing the associated wasm libraries:<pre class=language-sh data-lang=sh style=color:#c0c5ce;background-color:#2b303b><code class=language-sh data-lang=sh><span style=color:#bf616a>sudo</span><span> pacman</span><span style=color:#bf616a> -Syu</span><span> wasi-libc wasi-libc++ wasi-compiler-rt
</span></code></pre><p>You will need to port the above command to your distrobution. If you do not care about the improved security of sandboxed libraries, you can simply disable them by adding the following to ``</div></article></main><script defer src=https://praxivesoftware.github.io/Samurai/elasticlunr.min.js></script><script defer src=https://praxivesoftware.github.io/Samurai/search_index.en.js></script><script defer src=https://praxivesoftware.github.io/Samurai/js.js></script>