<!doctype html><html><head><meta charset=UTF-8><link href=https://praxivesoftware.github.io/Samurai/main.css rel=stylesheet><meta content="width=device-width,initial-scale=1.0,maximum-scale=1" name=viewport><title> Automatic updates | Samurai </title><body><script>fetch(`https://api.github.com/repos/PraxiveSoftware/samurai/releases/latest`).then(a=>a.json()).then(a=>{let b=a.name;let c=a.html_url;release.innerHTML=`<a href='${c}'>${b}</a>`})</script><main><nav><a href=https://praxivesoftware.github.io/Samurai> <img alt src=https://raw.githubusercontent.com/microsoft/fluentui-emoji/main/assets/Dragon/3D/dragon_3d.png> </a><div id=release></div><a class=ms-Icon--GlobalNavButton href=javascript:void(0); id=mobile onclick=burger()></a><div id=trees><input class=tree-toggle id=getting-started type=checkbox><label class=tree-toggle-label for=getting-started>Getting Started</label><ul class=subtree><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/overview/>Setting up your project</a><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/filestructure/>Understanding the file structure</a><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/userchrome/>Customizing Your Browser's UI</a></ul><input checked class=tree-toggle id=guides type=checkbox><label class=tree-toggle-label for=guides>Guides</label><ul class=subtree><li><a href=https://praxivesoftware.github.io/Samurai/guides/windows/>Preparing Windows</a><li><a href=https://praxivesoftware.github.io/Samurai/guides/removingpocket/>Removing pocket</a><li><a href=https://praxivesoftware.github.io/Samurai/guides/includingaddons/>Including addons</a><li><a href=https://praxivesoftware.github.io/Samurai/guides/branding/>Branding your browser</a><li class=active><a href=https://praxivesoftware.github.io/Samurai/guides/autoupdates/>Automatic updates</a></ul><input class=tree-toggle id=reference type=checkbox><label class=tree-toggle-label for=reference>Reference</label><ul class=subtree><li><a href=https://praxivesoftware.github.io/Samurai/reference/config/>`samurai.json` Reference</a></ul></div></nav><article><div id=on_right><span class=ms-Icon--Search id=search-ico></span></div><div class=search-container><input placeholder="Search as you type..." id=search type=search><div class=search-results><div class=search-results__header></div><ul class=search-results__items></ul></div></div><div id=wrap><h1 id=automatic-updates>Automatic updates</h1><blockquote><p><strong>Note</strong> Automatic updates only works for browsers using GitHub to host their binaries.</blockquote><p>Mozilla provides an automatic update service that can be used by anyone building a Firefox fork or any other application that depends on Mozilla toolkit.<p>Attached to your "brand", you will need to include information regarding that brand's release. For example, Praxive has the following information attached to its alpha brand.<pre class=language-json data-lang=json style=color:#c0c5ce;background-color:#2b303b><code class=language-json data-lang=json><span>{
</span><span>  </span><span style=color:#2b303b;background-color:#bf616a>...,</span><span>
</span><span>  "</span><span style=color:#a3be8c>brands</span><span>": {
</span><span>    </span><span style=color:#2b303b;background-color:#bf616a>...,</span><span>
</span><span>    "</span><span style=color:#a3be8c>alpha</span><span>": {
</span><span>      </span><span style=color:#2b303b;background-color:#bf616a>...,</span><span>
</span><span>
</span><span>      "</span><span style=color:#a3be8c>release</span><span>": {
</span><span>        "</span><span style=color:#a3be8c>displayVersion</span><span>": "</span><span style=color:#a3be8c>1.0.0-beta.1</span><span>",
</span><span>        "</span><span style=color:#a3be8c>github</span><span>": {
</span><span>          "</span><span style=color:#a3be8c>repo</span><span>": "</span><span style=color:#a3be8c>PraxiveSoftware/browser-desktop</span><span>"
</span><span>        },
</span><span>        "</span><span style=color:#a3be8c>x86</span><span>": {
</span><span>          "</span><span style=color:#a3be8c>windowsMar</span><span>": "</span><span style=color:#a3be8c>windows.mar</span><span>",
</span><span>          "</span><span style=color:#a3be8c>macosMar</span><span>": "</span><span style=color:#a3be8c>macosIntel.mar</span><span>",
</span><span>          "</span><span style=color:#a3be8c>linuxMar</span><span>": "</span><span style=color:#a3be8c>linux.mar</span><span>"
</span><span>        }
</span><span>      }
</span><span>    }
</span><span>  },
</span><span>  </span><span style=color:#2b303b;background-color:#bf616a>...</span><span>
</span><span>}
</span></code></pre><p>The release key includes both the latest version (<code>displayVersion</code>) and release info. In this case, binaries are released to github. For <code>x86</code>, we provide a number of <code>.mar</code> files for each platform. <code>.mar</code> files are "Mozilla Archives" and are used to distribute updates.<p>When creating update manifests, they will point to <a href=https://github.com/Praxive-Software/browser-desktop/releases/tag/1.0.0-beta.1>the release tagged <code>displayVersion</code></a>. The update manifests tell Mozilla's updater to download the update manifest with the version that corresponds with the file name above. So an x86 linux computer will download the <code>linux.mar</code> file and use that to update.<h2 id=creating-mar-files-and-update-manifests>Creating MAR files and update manifests</h2><p>Both <code>.mar</code> files and the update manifests are automatically created by running <code>samurai package</code>. This will generate a number of files in the <code>dist</code> directory.<p>An <code>output.mar</code> will be included in the root, which you should rename to the appropriate platform. For example, <code>linux.mar</code> for linux. This should be included with your GitHub release.<p>Update manifests are stored in the <code>dist/update</code> directory. The contents of this directory should be uploaded to a webserver (e.g. GitHub Pages or S3) such that their root is at <code>/updates/browser/</code>.<p>You will then need to set the <code>updateHostname</code> in <code>samurai.json</code> to the url of your update server. For Praxive, this is <code>updates.praxive.io</code>. You may also need to change the update server specified <a href=https://searchfox.org/mozilla-central/rev/560b7b1b174ed36912b969eee0c1920f3c59bc56/build/moz.build#94>here</a>.</div></article></main><script defer src=https://praxivesoftware.github.io/Samurai/elasticlunr.min.js></script><script defer src=https://praxivesoftware.github.io/Samurai/search_index.en.js></script><script defer src=https://praxivesoftware.github.io/Samurai/js.js></script>