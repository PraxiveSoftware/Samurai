<!doctype html><html><head><meta charset=UTF-8><link href=https://praxivesoftware.github.io/Samurai/main.css rel=stylesheet><meta content="width=device-width,initial-scale=1.0,maximum-scale=1" name=viewport><title> Including addons | Samurai </title><body><script>fetch(`https://api.github.com/repos/PraxiveSoftware/samurai/releases/latest`).then(a=>a.json()).then(a=>{let b=a.name;let c=a.html_url;release.innerHTML=`<a href='${c}'>${b}</a>`})</script><main><nav><a href=https://praxivesoftware.github.io/Samurai> <img alt src=https://raw.githubusercontent.com/microsoft/fluentui-emoji/main/assets/Dragon/3D/dragon_3d.png> </a><div id=release></div><a class=ms-Icon--GlobalNavButton href=javascript:void(0); id=mobile onclick=burger()></a><div id=trees><input class=tree-toggle id=getting-started type=checkbox><label class=tree-toggle-label for=getting-started>Getting Started</label><ul class=subtree><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/overview/>Setting up your project</a><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/filestructure/>Understanding the file structure</a><li><a href=https://praxivesoftware.github.io/Samurai/getting-started/userchrome/>Customizing Your Browser's UI</a></ul><input checked class=tree-toggle id=guides type=checkbox><label class=tree-toggle-label for=guides>Guides</label><ul class=subtree><li><a href=https://praxivesoftware.github.io/Samurai/guides/windows/>Preparing Windows</a><li><a href=https://praxivesoftware.github.io/Samurai/guides/removingpocket/>Removing pocket</a><li class=active><a href=https://praxivesoftware.github.io/Samurai/guides/includingaddons/>Including addons</a><li><a href=https://praxivesoftware.github.io/Samurai/guides/branding/>Branding your browser</a><li><a href=https://praxivesoftware.github.io/Samurai/guides/autoupdates/>Automatic updates</a></ul><input class=tree-toggle id=reference type=checkbox><label class=tree-toggle-label for=reference>Reference</label><ul class=subtree><li><a href=https://praxivesoftware.github.io/Samurai/reference/config/>`samurai.json` Reference</a></ul></div></nav><article><div id=on_right><span class=ms-Icon--Search id=search-ico></span></div><div class=search-container><input placeholder="Search as you type..." id=search type=search><div class=search-results><div class=search-results__header></div><ul class=search-results__items></ul></div></div><div id=wrap><h1 id=including-addons>Including addons</h1><p>Samurai provides an automated system for including extensions in your project. The addons are downloaded and included during the <code>download</code> build step. Addons can be included in the project config (<code>samurai.json</code>).<pre class=language-json data-lang=json style=color:#c0c5ce;background-color:#2b303b><code class=language-json data-lang=json><span>{
</span><span>  </span><span style=color:#65737e>// Your options here
</span><span>  "</span><span style=color:#a3be8c>addons</span><span>": {
</span><span>    "</span><span style=color:#a3be8c>ublock</span><span>": {
</span><span>      "</span><span style=color:#a3be8c>id</span><span>": "</span><span style=color:#a3be8c>uBlock0@raymondhill.net</span><span>",
</span><span>      "</span><span style=color:#a3be8c>url</span><span>": "</span><span style=color:#a3be8c>https://github.com/gorhill/uBlock/releases/download/1.39.0/uBlock0_1.39.0.firefox.xpi</span><span>"
</span><span>    }
</span><span>  }
</span><span>}
</span></code></pre><p>Note that the <code>id</code> is the gecko application id specified in the <code>manifest.json</code>.<pre class=language-json data-lang=json style=color:#c0c5ce;background-color:#2b303b><code class=language-json data-lang=json><span>{
</span><span>  </span><span style=color:#65737e>// ...
</span><span>
</span><span>  "</span><span style=color:#a3be8c>browser_specific_settings</span><span>": {
</span><span>    "</span><span style=color:#a3be8c>gecko</span><span>": {
</span><span>      "</span><span style=color:#a3be8c>id</span><span>": "</span><span style=color:#a3be8c>uBlock0@raymondhill.net</span><span>",
</span><span>      "</span><span style=color:#a3be8c>strict_min_version</span><span>": "</span><span style=color:#a3be8c>60.0</span><span>"
</span><span>    }
</span><span>  }
</span><span>
</span><span>  </span><span style=color:#65737e>// ...
</span><span>}
</span></code></pre><h2 id=specifying-location-in-customizable-ui>Specifying location in customizable ui</h2><p>By default, when adding an addon with a toolbar button, it will be placed next to the hamburger menu. However, you may want to place it somewhere else. To do this, you must change the customizable ui in a similar way to how you would when removing pocket.<p>You are going to want to open <code>.engine/browser/components/customizableui/CustomizableUI.jsm</code>. At the top, you want to import the <code>ExtensionCommon</code> module.<pre class=language-js data-lang=js style=color:#c0c5ce;background-color:#2b303b><code class=language-js data-lang=js><span style=color:#b48ead>const </span><span>{ </span><span style=color:#bf616a>makeWidgetId </span><span>} = </span><span style=color:#bf616a>ChromeUtils</span><span>.</span><span style=color:#8fa1b3>import</span><span>(
</span><span>  "</span><span style=color:#a3be8c>resource://gre/modules/ExtensionCommon.jsm</span><span>"
</span><span>).</span><span style=color:#bf616a>ExtensionCommon</span><span>;
</span></code></pre><p>Then, add a constant with the id of the addon at the top of the file, for example:<pre class=language-js data-lang=js style=color:#c0c5ce;background-color:#2b303b><code class=language-js data-lang=js><span style=color:#b48ead>const </span><span style=color:#bf616a>kUBlockOriginID </span><span>= "</span><span style=color:#a3be8c>uBlock0@raymondhill.net</span><span>";
</span></code></pre><p>Now, you can go down to the <code>navbarPlacements</code> array (around line 240) and add<pre class=language-js data-lang=js style=color:#c0c5ce;background-color:#2b303b><code class=language-js data-lang=js><span>`</span><span style=color:#a3be8c>${</span><span style=color:#8fa1b3>makeWidgetId</span><span style=color:#a3be8c>(</span><span style=color:#bf616a>kUBlockOriginID</span><span style=color:#a3be8c>)}-browser-action</span><span>`,
</span></code></pre><p>To the array where you want the icon to appear, for example:<pre class=language-js data-lang=js style=color:#c0c5ce;background-color:#2b303b><code class=language-js data-lang=js><span style=color:#b48ead>let </span><span style=color:#bf616a>navbarPlacements </span><span>= [
</span><span>  "</span><span style=color:#a3be8c>back-button</span><span>",
</span><span>  "</span><span style=color:#a3be8c>forward-button</span><span>",
</span><span>  "</span><span style=color:#a3be8c>stop-reload-button</span><span>",
</span><span>  </span><span style=color:#bf616a>Services</span><span>.</span><span style=color:#bf616a>policies</span><span>.</span><span style=color:#8fa1b3>isAllowed</span><span>("</span><span style=color:#a3be8c>removeHomeButtonByDefault</span><span>")
</span><span>    ? </span><span style=color:#d08770>null
</span><span>    : "</span><span style=color:#a3be8c>home-button</span><span>",
</span><span>  "</span><span style=color:#a3be8c>spring</span><span>",
</span><span>  `</span><span style=color:#a3be8c>${</span><span style=color:#8fa1b3>makeWidgetId</span><span style=color:#a3be8c>(</span><span style=color:#bf616a>kUBlockOriginID</span><span style=color:#a3be8c>)}-browser-action</span><span>`,
</span><span>  "</span><span style=color:#a3be8c>urlbar-container</span><span>",
</span><span>  "</span><span style=color:#a3be8c>spring</span><span>",
</span><span>  "</span><span style=color:#a3be8c>save-to-pocket-button</span><span>",
</span><span>  "</span><span style=color:#a3be8c>downloads-button</span><span>",
</span><span>  </span><span style=color:#bf616a>AppConstants</span><span>.</span><span style=color:#bf616a>MOZ_DEV_EDITION </span><span>? "</span><span style=color:#a3be8c>developer-button</span><span>" : </span><span style=color:#d08770>null</span><span>,
</span><span>  "</span><span style=color:#a3be8c>fxa-toolbar-menu-button</span><span>",
</span><span>].</span><span style=color:#8fa1b3>filter</span><span>((</span><span style=color:#bf616a>name</span><span>) </span><span style=color:#b48ead>=> </span><span style=color:#bf616a>name</span><span>);
</span></code></pre><p>Finally, export the changes you have made:<pre class=language-sh data-lang=sh style=color:#c0c5ce;background-color:#2b303b><code class=language-sh data-lang=sh><span style=color:#bf616a>samurai</span><span> export-file browser/components/customizableui/CustomizableUI.jsm
</span></code></pre></div></article></main><script defer src=https://praxivesoftware.github.io/Samurai/elasticlunr.min.js></script><script defer src=https://praxivesoftware.github.io/Samurai/search_index.en.js></script><script defer src=https://praxivesoftware.github.io/Samurai/js.js></script>